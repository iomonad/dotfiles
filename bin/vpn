#!/bin/bash
# vpn - simple vpn location chooser
# iomonad <iomonad@riseup.net> 2015

usage() {
    echo "vpn - Simple vpn location chooser"
    echo "Usage: vpn {start,stop,location,enable} <location>"
}

if [ $# -eq 0 ]
then
    usage
fi


case "$1" in

    "start")  echo "Starting vpn to $2"
              case "$2" in
                  "nl") service openvpn stop
                        service openvpn.nl start
                        ;;
                  "ch") service openvpn stop
                        service openvpn.ch start
                        ;;
                  "dk") service openvpn stop
                        service openvpn.dk start
                        ;;
                  "jp") service openvpn stop
                        service openvpn.jp start
                        ;;
                  "ru") service openvpn stop
                        service openvpn.ru start
                        ;;
                  *) echo "Error, no supported location"
                     exit 0
                     ;;
              esac
        ;;
    "stop")  echo  "Stopping vpn client ..."
             service openpvn* stop
             echo "Done."
        ;;
    
    "enable") echo  "Sending SIGKILL signal"
              case "$2" in
                  "nl") service openvpn stop
                        rc-update add openvpn.nl
                        ;;
                  "ch") service openvpn stop
                        rc-update add openvpn.ch
                        ;;
                  "dk") service openvpn stop
                        rc-update add openvpn.dk
                        ;;
                  "jp") service openvpn stop
                        rc-update add openvpn.jp
                        ;;
                  "ru") service openvpn stop
                        rc-update add openvpn.ru
                        ;;
                  *) echo "Error, no supported location"
                     exit 0
                     ;;
              esac
              ;;
    *) usage
       exit 1
       ;;
esac
